/*! skrollr 0.6.21 (2014-01-06) | Alexander Prinzhorn - https://github.com/Prinzhorn/skrollr | Free to use under terms of MIT license */
(function(s,x,B){function v(a){p=x.documentElement;w=x.body;Aa();q=this;a=a||{};S=a.constants||{};if(a.easing)for(var b in a.easing)T[b]=a.easing[b];$=a.edgeStrategy||"set";H={beforerender:a.beforerender,render:a.render};(P=!1!==a.forceHeight)&&(aa=a.scale||1);U=a.mobileDeceleration||Ba;ba=!1!==a.smoothScrolling;V=a.smoothScrollingDuration||Ca;I={targetTop:q.getScrollTop()};(C=(a.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||s.opera)})())?
((D=x.getElementById("skrollr-body"))&&Da(),Ea(),J(p,[F,ma],[ca])):J(p,[F,na],[ca]);q.refresh();oa(s,"resize orientationchange",function(){var a=p.clientWidth,b=p.clientHeight;if(b!==da||a!==ea)da=b,ea=a,W=!0});var c=Fa();(function d(){W&&(W=!1,pa());var a=q.getScrollTop(),b,y=N();m?(y>=m.endTime?(a=m.targetTop,b=m.done,m=B):(a=m.easing((y-m.startTime)/m.duration),a=m.startTop+a*m.topDiff|0),q.setScrollTop(a,!0)):O||(I.targetTop-a&&(I={startTop:L,topDiff:a-L,targetTop:a,startTime:fa,endTime:fa+V}),
y<=I.endTime&&(a=T.sqrt((y-I.startTime)/V),a=I.startTop+a*I.topDiff|0));C&&D&&M.setStyle(D,"transform","translate(0, "+-Q+"px) "+R);if(O||L!==a){X=a>L?"down":a<L?"up":X;O=!1;var s={curTop:a,lastTop:L,maxTop:z,direction:X};if(!1!==(H.beforerender&&H.beforerender.call(q,s))){for(var n=a,r=q.getScrollTop(),g=0,l=A.length;g<l;g++){var h=A[g],p=h.element,t=h.smoothScrolling?n:r,e=h.keyFrames,u=t<e[0].frame,v=t>e[e.length-1].frame,w=e[u?0:e.length-1],E;if(u||v){if(u&&-1===h.edge||v&&1===h.edge)continue;
J(p,[u?ga:ha],[ga,qa,ha]);h.edge=u?-1:1;switch(h.edgeStrategy){case "reset":Y(p);continue;case "ease":t=w.frame;break;default:case "set":t=w.props;for(E in t)ia.call(t,E)&&(u=ra(t[E].value),M.setStyle(p,E,u));continue}}else 0!==h.edge&&(J(p,["skrollable",qa],[ga,ha]),h.edge=0);u=0;for(h=e.length-1;u<h;u++)if(t>=e[u].frame&&t<=e[u+1].frame){h=e[u];e=e[u+1];for(E in h.props)if(ia.call(h.props,E)){var w=(t-h.frame)/(e.frame-h.frame),w=h.props[E].easing(w),u=h.props[E].value,v=e.props[E].value,x=void 0,
F=u.length;if(F!==v.length)throw"Can't interpolate between \""+u[0]+'" and "'+v[0]+'"';for(var G=[u[0]],x=1;x<F;x++)G[x]=u[x]+(v[x]-u[x])*w;u=G;u=ra(u);M.setStyle(p,E,u)}break}}L=a;H.render&&H.render.call(q,s)}b&&b.call(q,!1)}fa=y;sa=c(d)})();return q}var M=s.skrollr={get:function(){return q},init:function(a){return q||new v(a)},VERSION:"0.6.21"},ia=Object.prototype.hasOwnProperty,t=s.Math,ja=s.getComputedStyle,p,w,ga="skrollable-before",qa="skrollable-between",ha="skrollable-after",F="skrollr",ca=
"no-"+F,na=F+"-desktop",ma=F+"-mobile",Ba=0.004,Ca=200,ka=/^(?:input|textarea|button|select)$/i,ta=/^\s+|\s+$/g,Ga=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,Ha=/\s*([\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,Ia=/^([a-z\-]+)\[(\w+)\]$/,Ja=/-([a-z])/g,Ka=function(a,b){return b.toUpperCase()},ua=/[\-+]?[\d]*\.?[\d]+/g,va=/\{\?\}/g,wa=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,xa=/[a-z\-]+-gradient/g,e="",G="",Aa=function(){var a=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;
if(ja){var b=ja(w,null),c;for(c in b)if(e=c.match(a)||+c==c&&b[c].match(a))break;e?(e=e[0],"-"===e.slice(0,1)?(G=e,e={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[e]):G="-"+e.toLowerCase()+"-"):e=G=""}},Fa=function(){var a=s.requestAnimationFrame||s[e.toLowerCase()+"RequestAnimationFrame"],b=N();if(C||!a)a=function(a){var f=N()-b,f=t.max(0,1E3/60-f);return s.setTimeout(function(){b=N();a()},f)};return a},La=function(){var a=s.cancelAnimationFrame||s[e.toLowerCase()+"CancelAnimationFrame"];
if(C||!a)a=function(a){return s.clearTimeout(a)};return a},T={begin:function(){return 0},end:function(){return 1},linear:function(a){return a},quadratic:function(a){return a*a},cubic:function(a){return a*a*a},swing:function(a){return-t.cos(a*t.PI)/2+0.5},sqrt:function(a){return t.sqrt(a)},outCubic:function(a){return t.pow(a-1,3)+1},bounce:function(a){var b;if(0.5083>=a)b=3;else if(0.8489>=a)b=9;else if(0.96208>=a)b=27;else if(0.99981>=a)b=91;else return 1;return 1-t.abs(3*t.cos(a*b*1.028)/b)}};v.prototype.refresh=
function(a){var b,c,f=!1;a===B?(f=!0,A=[],la=0,a=x.getElementsByTagName("*")):a=[].concat(a);b=0;for(c=a.length;b<c;b++){var d=a[b],k=d,K=[],y=ba,e=$;f&&delete d.___skrollable_id;if(d.attributes){for(var n=0,r=d.attributes.length;n<r;n++){var g=d.attributes[n];if("data-anchor-target"===g.name){if(k=x.querySelector(g.value),null===k)throw'Unable to find anchor target "'+g.value+'"';}else if("data-smooth-scrolling"===g.name)y="off"!==g.value;else if("data-edge-strategy"===g.name)e=g.value;else{var l=
g.name.match(Ga);if(null!==l){g={props:g.value,element:d};K.push(g);var h=l[1];h&&(g.constant=h.substr(1));h=l[2];/p$/.test(h)?(g.isPercentage=!0,g.offset=(h.slice(0,-1)|0)/100):g.offset=h|0;h=l[3];l=l[4]||h;h&&"start"!==h&&"end"!==h?(g.mode="relative",g.anchors=[h,l]):(g.mode="absolute","end"===h?g.isEnd=!0:g.isPercentage||(g.offset*=aa))}}}K.length&&(!f&&"___skrollable_id"in d?(l=d.___skrollable_id,n=A[l].styleAttr,r=A[l].classAttr):(l=d.___skrollable_id=la++,n=d.style.cssText,r=ya(d)),A[l]={element:d,
styleAttr:n,classAttr:r,anchorTarget:k,keyFrames:K,smoothScrolling:y,edgeStrategy:e},J(d,["skrollable"],[]))}}pa();b=0;for(c=a.length;b<c;b++)if(f=A[a[b].___skrollable_id],f!==B){d=f;k=0;for(K=d.keyFrames.length;k<K;k++){y=d.keyFrames[k];for(n={};null!==(r=Ha.exec(y.props));)e=r[1],l=r[2],r=e.match(Ia),null!==r?(e=r[1],r=r[2]):r="linear",l=l.indexOf("!")?Ma(l):[l.slice(1)],n[e]={value:l,easing:T[r]};y.props=n}d={};K=k=void 0;k=0;for(K=f.keyFrames.length;k<K;k++)za(f.keyFrames[k],d);d={};for(k=f.keyFrames.length-
1;0<=k;k--)za(f.keyFrames[k],d)}return q};v.prototype.relativeToAbsolute=function(a,b,c){var f=p.clientHeight,d=a.getBoundingClientRect();a=d.top;d=d.bottom-d.top;"bottom"===b?a-=f:"center"===b&&(a-=f/2);"bottom"===c?a+=d:"center"===c&&(a+=d/2);a+=q.getScrollTop();return a+0.5|0};v.prototype.animateTo=function(a,b){b=b||{};var c=N(),f=q.getScrollTop();m={startTop:f,topDiff:a-f,targetTop:a,duration:b.duration||1E3,startTime:c,endTime:c+(b.duration||1E3),easing:T[b.easing||"linear"],done:b.done};m.topDiff||
(m.done&&m.done.call(q,!1),m=B);return q};v.prototype.stopAnimateTo=function(){m&&m.done&&m.done.call(q,!0);m=B};v.prototype.isAnimatingTo=function(){return!!m};v.prototype.setScrollTop=function(a,b){O=!0===b;C?Q=t.min(t.max(a,0),z):s.scrollTo(0,a);return q};v.prototype.getScrollTop=function(){return C?Q:s.pageYOffset||p.scrollTop||w.scrollTop||0};v.prototype.getMaxScrollTop=function(){return z};v.prototype.on=function(a,b){H[a]=b;return q};v.prototype.off=function(a){delete H[a];return q};v.prototype.destroy=
function(){La()(sa);for(var a,b=0,c=Z.length;b<c;b++)a=Z[b],Na(a.element,a.name,a.listener);Z=[];J(p,[ca],[F,na,ma]);a=0;for(b=A.length;a<b;a++)Y(A[a].element);p.style.overflow=w.style.overflow="auto";p.style.height=w.style.height="auto";D&&M.setStyle(D,"transform","none");P=H=D=q=B;z=0;aa=1;U=S=B;X="down";L=-1;da=ea=0;W=!1;O=I=V=ba=m=B;la=0;$=B;C=!1;Q=0;R=B};var Ea=function(){var a,b,c,f,d,k,e,y,m,n,r;oa(p,"touchstart touchmove touchcancel touchend",function(g){var l=g.changedTouches[0];for(f=g.target;3===
f.nodeType;)f=f.parentNode;d=l.clientY;k=l.clientX;m=g.timeStamp;ka.test(f.tagName)||g.preventDefault();switch(g.type){case "touchstart":a&&a.blur();q.stopAnimateTo();a=f;b=e=d;c=k;break;case "touchmove":ka.test(f.tagName)&&x.activeElement!==f&&g.preventDefault();y=d-e;r=m-n;q.setScrollTop(Q-y,!0);e=d;n=m;break;default:case "touchcancel":case "touchend":var h=b-d,p=c-k;if(49>p*p+h*h){ka.test(a.tagName)||(a.focus(),h=x.createEvent("MouseEvents"),h.initMouseEvent("click",!0,!0,g.view,1,l.screenX,l.screenY,
l.clientX,l.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,0,null),a.dispatchEvent(h));break}a=B;l=y/r;l=t.max(t.min(l,3),-3);g=t.abs(l/U);l=l*g+0.5*U*g*g;h=q.getScrollTop()-l;p=0;h>z?(p=(z-h)/l,h=z):0>h&&(p=-h/l,h=0);q.animateTo(h+0.5|0,{easing:"outCubic",duration:g*(1-p)})}});s.scrollTo(0,0);p.style.overflow=w.style.overflow="hidden"},Ma=function(a){var b=[];wa.lastIndex=0;a=a.replace(wa,function(a){return a.replace(ua,function(a){return a/255*100+"%"})});G&&(xa.lastIndex=0,a=a.replace(xa,function(a){return G+
a}));a=a.replace(ua,function(a){b.push(+a);return"{?}"});b.unshift(a);return b},za=function(a,b){for(var c in b)ia.call(a.props,c)||(a.props[c]=b[c]);for(c in a.props)b[c]=a.props[c]},ra=function(a){var b=1;va.lastIndex=0;return a[0].replace(va,function(){return a[b++]})},Y=function(a,b){a=[].concat(a);for(var c,f,d=0,k=a.length;d<k;d++)if(f=a[d],c=A[f.___skrollable_id])b?(f.style.cssText=c.dirtyStyleAttr,J(f,c.dirtyClassAttr)):(c.dirtyStyleAttr=f.style.cssText,c.dirtyClassAttr=ya(f),f.style.cssText=
c.styleAttr,J(f,c.classAttr))},Da=function(){R="translateZ(0)";M.setStyle(D,"transform",R);var a=ja(D),b=a.getPropertyValue("transform"),a=a.getPropertyValue(G+"transform");b&&"none"!==b||a&&"none"!==a||(R="")};M.setStyle=function(a,b,c){a=a.style;b=b.replace(Ja,Ka).replace("-","");if("zIndex"===b)isNaN(c)?a[b]=c:a[b]=""+(c|0);else if("float"===b)a.styleFloat=a.cssFloat=c;else try{e&&(a[e+b.slice(0,1).toUpperCase()+b.slice(1)]=c),a[b]=c}catch(f){}};var oa=M.addEvent=function(a,b,c){var f=function(a){a=
a||s.event;a.target||(a.target=a.srcElement);a.preventDefault||(a.preventDefault=function(){a.returnValue=!1});return c.call(this,a)};b=b.split(" ");for(var d,k=0,e=b.length;k<e;k++)d=b[k],a.addEventListener?a.addEventListener(d,c,!1):a.attachEvent("on"+d,f),Z.push({element:a,name:d,listener:c})},Na=M.removeEvent=function(a,b,c){b=b.split(" ");for(var f=0,d=b.length;f<d;f++)a.removeEventListener?a.removeEventListener(b[f],c,!1):a.detachEvent("on"+b[f],c)},pa=function(){var a=q.getScrollTop();z=0;
P&&!C&&(w.style.height="auto");var b=p.clientHeight,c=p.clientHeight,f={},d,k;for(d in S)k=S[d],"function"===typeof k?k=k.call(q):/p$/.test(k)&&(k=k.slice(0,-1)/100*c),f[d]=k;var e,m,s,n,r,g,l;r=0;for(g=A.length;r<g;r++)for(e=A[r],c=e.element,d=e.anchorTarget,k=e.keyFrames,m=0,s=k.length;m<s;m++)n=k[m],e=n.offset,l=f[n.constant]||0,n.frame=e,n.isPercentage&&(e*=b,n.frame=e),"relative"===n.mode&&(Y(c),n.frame=q.relativeToAbsolute(d,n.anchors[0],n.anchors[1])-e,Y(c,!0)),n.frame+=l,P&&!n.isEnd&&n.frame>
z&&(z=n.frame);z=t.max(z,t.max(D&&D.offsetHeight||0,w.scrollHeight,w.offsetHeight,p.scrollHeight,p.offsetHeight,p.clientHeight)-p.clientHeight);r=0;for(g=A.length;r<g;r++){e=A[r];k=e.keyFrames;m=0;for(s=k.length;m<s;m++)n=k[m],l=f[n.constant]||0,n.isEnd&&(n.frame=z-n.offset+l);e.keyFrames.sort(Oa)}P&&!C&&(w.style.height=z+p.clientHeight+"px");C?q.setScrollTop(t.min(q.getScrollTop(),z)):q.setScrollTop(a,!0);O=!0},ya=function(a){var b="className";s.SVGElement&&a instanceof s.SVGElement&&(a=a[b],b="baseVal");
return a[b]},J=function(a,b,c){var f="className";s.SVGElement&&a instanceof s.SVGElement&&(a=a[f],f="baseVal");if(c===B)a[f]=b;else{for(var d=a[f],e=0,m=c.length;e<m;e++)d=(" "+d+" ").replace(" "+c[e]+" "," ");d=d.replace(ta,"");c=0;for(e=b.length;c<e;c++)-1===(" "+d+" ").indexOf(" "+b[c]+" ")&&(d+=" "+b[c]);a[f]=d.replace(ta,"")}},N=Date.now||function(){return+new Date},Oa=function(a,b){return a.frame-b.frame},q,A,D,H,P,z=0,aa=1,S,U,X="down",L=-1,fa=N(),ea=0,da=0,W=!1,m,ba,V,I,O,la=0,$,C=!1,Q=0,
R,Z=[],sa})(window,document);